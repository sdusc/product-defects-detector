# 开发日志-殷梓淇

## 2022-06-20

+ 收听了由因特尔工程师主持的技术分享会
+ 查看了具体的项目要求、目标，还有对给出的训练数据集进行了初步查看，分析项目整体思路

## 2022-06-21

+ 加入了项目组的Github团队，查看学习了Github的使用方法
+ 早上参加组内召开的线上会议，对题目进行分工和讨论，确定下午答疑时需要详细提出的技术和功能要求等问题
+ 下午参加了项目组线上答疑会，张老师通过视频会议对项目的目标、技术点、角色、架构进行讲解，对算法模型、推理优化、前后端框架等项目核心问题提出了建议，并以提问的形式引导我们对模型进行思考，让我们对项目如何推进有了具体的思路
+ 晚上参加了组内召开的线下会议，对今天的项目组线上答疑会进行了总结，然后对每位同学的特长，根据任务的性质进行了合理的对应分配，我与侯广曜同学的任务是研发微信小程序端的界面

## 2022-06-22

+ 今天我和侯广曜同学对于微信小程序的开发环境进行了配置，学习到了微信小程序是需要使用微信官方给出的特定的代码编辑器和调试环境，以及专属的项目管理机制来进行工作的，这样可以保证上线的项目的安全。此外，我们还得知了微信小程序的代码上线是需要人工进行一条条的审核的，极大的保证了上线项目的安全性
+ 配置完成后，我们组建了微信小程序开发团队，并且按照文档，一步步的创建了团队专属的Git仓库，并学习了如何上传代码至团队的Git仓库中以及如何更新Git仓库上的最新代码至本机环境中，以及如何确定下载的和上传的代码是否为最新的代码版本

## 2022-06-23

+ 今天学习了微信小程序对于获取用户上传图片的接口，明白了里面各个参数的含义，并进行了调试和实验，完成了选择图片的功能，但未能上传
+ 今天和侯广曜同学进行了线下讨论，对需求进行了详细分析，画出了UML用例图，并打算基于该UML用例图进行迭代式开发，最终满足项目需求

## 2022-06-24

+ 今天学习和完成了小程序的页面布局设置，明白了关于view组件，text组件和image组件等的用法，初步设置好了页面前端，由一个按钮，一个图片展示区域还有一个检测结果展示框来进行显示。按钮供用户进行图片上传，然后展示用户选择上传的图片，还有该图片的检测结果，包括是否有缺陷和对应的处理时间

## 2022-06-25

+ 今天学习了小程序的请求发送功能，也就是向后端搭建的服务器发送一个请求，并得到返回值，从返回值中获取数据。经过学习和测试，我们完成了该功能，我负责搭建小程序前端的界面和处理方法，侯广曜同学负责搭建测试服务器，我们进行了线下开发测试，完成了请求-回应的双方过程功能

## 2022-06-27

+ 今天学习了小程序的图片上传功能，也就是如何将图片传给我们的后端服务器，与侯广曜同学继续进行了线下开发测试。遇到的问题：在运行官方给出的示例代码的改编版本中出现了bug，例如后端服务器没有收到任何请求，小程序这边也没有任何报错信息，我们无法得知是哪里出现了问题。在查看网络上的问答论坛以及微信小程序官方的问答论坛后，虽然没有得到解决方法，但是得到了一个极为关键的解决思路：可以设置一个final函数，在方法结束后，无论是res是成功的或者res是由错误的的（这里我们才发现只写了success的情况，没有写error的情况，导致我们在debug的过程中浪费了非常多的时间）都会执行的函数。我们把res的数据打印了出来，终于找到了错误的原因。但另外一个问题接踵而至，就是图片的传输速率和质量问题。针对该问题，我们考虑到了另外一种思路：由于我们使用的私有服务器的带宽限制，图片传输会非常慢，而且会降低画质，这是我们不想看到的。我们想寻求一个中间介质，帮助我们加速这个过程，并且能够完整的传输原图。捋清了逻辑，我们决定明天着手根据该思路来进行开发，舍弃原来直接传输的方法。

## 2022-06-28

+ 经过寻找和实验，我们尝试了很多方法，最终决定使用微信开发环境自带的腾讯云服务器作为中间介质传输。该服务器的资源是有免费额度的，我们的需求量不大，因为我们一次只发送一张图片，且图片的规模很小，只有50-60KB，免费额度足以满足我们的需求。经过查看具体的文档使用手册，我们明白了使用方法，做出了一个初步模板，并且成功传输到了云端，云端中可以直接查看图片的下载地址，我们经过下载和检验，发现确实是和原图一模一样的大小，上传功能成功了。

## 2022-06-29

+ 今天的目标是实现如何获取下载链接地址，并装在请求中发送给后端服务器。因为上传图片成功后，返回值只有一个成功以及上传后的图片ID，是没有图片下载地址的，我们得想办法拿到下载地址，实现自动获取和发送，而不是人工获取和发送。在查看使用文档后，我们得知可以使用文件ID来得到这个文件的相关信息，其中就包括了它的下载地址。拿到了下载地址，把它包装在请求携带的数据中，发送给了后端服务器。后端服务器拿到地址后进行下载，得到了我们的目标图片，试验成功。

## 2022-06-30

+ 今天的目标是得到后端传过来的图片，因为考虑到后期可能会对图片进行标注，然后再返回给前端，我们就决定完成该功能。在查阅了很多资料后，我们都没有得到如何让后端发图片给前端的方法。我们突然想到，为什么不让前端直接去请求图片呢？只要后端返回一个图片的路径，前端直接去请求即可。于是我们按照这个思路，成功的让前端拿到了图片，功能实现。

## 2022-07-01

+ 今天的目标是进行测试以及更改公网访问为局域网访问的方式。我们首先更改了向后端服务器访问的方式为局域网访问，连接到了含有模型的服务器上，将我们测试用的服务器的接收和发送代码传入新的后端服务器上。开始测试，我们传入了测试图片，发现第一次是没有问题的，检测结果正确。但是我们后续传入多个照片时，发现得到的图片永远是第一个传入的图片。于是我们猜测云端服务器有一个缓存机制，会把某个文件放到缓存里面，但是源文件跟新时，缓存里面的文件未更新，用户访问到的是未更新的文件。经过查找使用文档，证实了我们的想法，更改配置后测试阶段结束，功能均已实现。
+ 开会，讨论下一阶段的工作安排。

## 2022-07-02

+ 今天的任务是给小程序源码进行注释，方便后续的更改和维护，以及完成开发日志的更新，中期答辩的PPT制作。

